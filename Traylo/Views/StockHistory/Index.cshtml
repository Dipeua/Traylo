@model IEnumerable<StockHistory>
@{
    ViewBag.Title = "Mouvements de stock";
}

<div class="container-fluid">
    <div class="mb-3">
        @if (User.IsInRole("Admin"))
        {
            <a class="btn btn-sm btn-success shadow-sm mb-3" asp-asp-controller="StockHistory" asp-action="AddCentralStock">Ajouter au central</a>
            <a class="btn btn-sm btn-primary shadow-sm mb-3" asp-cpontroller="StockHistory" asp-action="DistributeToCity">Distribuer vers ville</a>

        }
        <a class="btn btn-sm btn-info shadow-sm mb-3" asp-asp-controller="StockHistory" asp-action="DistributeToDeliveryPerson">Distribuer vers livreur</a>
    </div>
    

    <div class="card shadow">
        <div class="card-header py-3 bg-primary text-white">
            <h6 class="m-0 font-weight-bold">Mouvements de stock</h6>
        </div>
        <div class="card-body">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Produit</th>
                        <th>Ville</th>
                        <th>Livreur</th>
                        <th>Quantité</th>
                        <th>Note</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var s in Model)
                    {
                        <tr>
                            <td>@s.Date.ToLocalTime().ToString("g")</td>
                            <td>@s.Product?.Name</td>
                            <td>@(s.City?.Name ?? "--")</td>
                            <td>@(s.DeliveryPerson?.FullName ?? "--")</td>
                            <td>@s.QuantityChange</td>
                            <td>@s.Note</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>